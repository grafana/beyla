version: '2'
services:
  go-json:
    image: golang:1.18@sha256:50c889275d26f816b5314fc99f55425fa76b18fcaf16af255f5d57f09e1f48da
    volumes:
      - '.:/go/src/go-json'
    deploy:
      resources:
        limits:
          memory: 620M
    working_dir: /go/src/go-json
    command: |
      sh -c "go test -c . && ls go-json.test"
