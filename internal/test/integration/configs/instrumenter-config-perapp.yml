routes:
  patterns:
    - /basic/:rnd
  unmatched: path
metrics:
  features: ["application_span"]
otel_metrics_export:
  endpoint: http://otelcol:4018
prometheus_export:
  port: 8999
discovery:
  instrument:
    - open_ports: 3030,3040
      metrics: { features: ["application", "application_span"] }
    - name: pytestserver
      open_ports: 7773
      metrics: { features: ["application", "application_span"] }
    - name: testserver
      open_ports: 8080
    - name: jtestserver
      open_ports: 8085
    # testing that the later match overrides the to-be-ignored features
    # with the global metrics features
    - name: to-be-ignored
      open_ports: 8090
      metrics: { features: [ "application", "application_span" ] }
    - name: rtestserver
      open_ports: 8090
